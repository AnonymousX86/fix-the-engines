
<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FTE.world &#8212; Fix The Engines 0.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../_static/bizstyle.css?v=658d757c" />
    
    <script src="../../_static/documentation_options.js?v=6c02275b"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Fix The Engines 0.4.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">FTE.world</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for FTE.world</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Main game component, everything about user interactions. &quot;Glues&quot; together all components.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="kn">from</span> <span class="nn">rich.style</span> <span class="kn">import</span> <span class="n">Style</span>
<span class="kn">from</span> <span class="nn">rich.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">rich.text</span> <span class="kn">import</span> <span class="n">Text</span>

<span class="kn">from</span> <span class="nn">FTE.console</span> <span class="kn">import</span> <span class="n">console</span>
<span class="kn">from</span> <span class="nn">FTE.characters</span> <span class="kn">import</span> <span class="n">Character</span>
<span class="kn">from</span> <span class="nn">FTE.locations</span> <span class="kn">import</span> <span class="n">Location</span>
<span class="kn">from</span> <span class="nn">FTE.settings</span> <span class="kn">import</span> <span class="n">DEBUG</span>


<div class="viewcode-block" id="UnknownCommand">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.UnknownCommand">[docs]</a>
<span class="k">class</span> <span class="nc">UnknownCommand</span><span class="p">(</span><span class="ne">BaseException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Command doesn&#39;t exist.&quot;&quot;&quot;</span></div>



<div class="viewcode-block" id="UnknownLocation">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.UnknownLocation">[docs]</a>
<span class="k">class</span> <span class="nc">UnknownLocation</span><span class="p">(</span><span class="ne">BaseException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Location doesn&#39;t exist.&quot;&quot;&quot;</span></div>



<div class="viewcode-block" id="UnknownCharacter">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.UnknownCharacter">[docs]</a>
<span class="k">class</span> <span class="nc">UnknownCharacter</span><span class="p">(</span><span class="ne">BaseException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Character doesn&#39;t exist.&quot;&quot;&quot;</span></div>



<div class="viewcode-block" id="Command">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.Command">[docs]</a>
<span class="k">class</span> <span class="nc">Command</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;How player can interact with the game. Represents player&#39;s action.</span>

<span class="sd">    :param name: Which word invokes the command.</span>
<span class="sd">    :type name: :obj:`str`</span>
<span class="sd">    :param description: Detailed and complete information how to use the command.</span>
<span class="sd">    :type description: :obj:`str`</span>
<span class="sd">    :param usage: Example usage of a command with expected types.</span>
<span class="sd">    :type usage: :obj:`str`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="o">*</span><span class="p">,</span>
            <span class="n">usage</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_usage</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">usage</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">usage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Example usage of a command with expected types, defaults to :attr:`FTE.world.Command.name`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_usage</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_usage</span><span class="si">}</span><span class="s1">&#39;</span></div>



<span class="n">COMMANDS</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Command</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>  <span class="c1"># All available commands</span>
    <span class="n">exit</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
        <span class="s1">&#39;exit&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Exits the game.&#39;</span>
    <span class="p">),</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
        <span class="s1">&#39;help&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Shows help. Optionally only &quot;commands&quot; or &quot;arguments&quot;.&#39;</span><span class="p">,</span>
        <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;(&quot;commands&quot; | &quot;arguments&quot;)&#39;</span>
    <span class="p">),</span>
    <span class="n">talk</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
        <span class="s1">&#39;talk&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Talk to someone.&#39;</span> <span class="o">+</span>
        <span class="s1">&#39; Pass character name to start conversation with them.&#39;</span> <span class="o">+</span>
        <span class="s1">&#39; You can talk only to characters in your location.&#39;</span><span class="p">,</span>
        <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;&lt;character name&gt;&#39;</span>
    <span class="p">),</span>
    <span class="n">go</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
        <span class="s1">&#39;go&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Go somewhere.&#39;</span> <span class="o">+</span>
        <span class="s1">&#39; Pass location name to go there.&#39;</span><span class="p">,</span>
        <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;&lt;location name&gt;&#39;</span>
    <span class="p">),</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
        <span class="s1">&#39;info&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Get information about a character or a location.&#39;</span> <span class="o">+</span>
        <span class="s1">&#39; Do not pass anything to show info about current location.&#39;</span><span class="p">,</span>
        <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;(charcter name | location name)&#39;</span>
    <span class="p">)</span>
<span class="p">)</span>


<div class="viewcode-block" id="World">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World">[docs]</a>
<span class="k">class</span> <span class="nc">World</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the game environment, the player, locations, characters, and matches of those.</span>

<span class="sd">    :param all_locations: Available (used) locations.</span>
<span class="sd">    :type all_locations: :obj:`tuple` of :class:`FTE.locations.Location`</span>
<span class="sd">    :param all_characters: Availabel (used) characters.</span>
<span class="sd">    :type all_characters: :obj:`tuple` of :class:`FTE.characters.Character`</span>
<span class="sd">    :param starting_location: Where player starts the game.</span>
<span class="sd">    :type starting_location: :class:`FTE.locations.Location`</span>
<span class="sd">    :param first_interaction: If this session is player&#39;s first interaction, e.g. first chapter.</span>
<span class="sd">    :type first_interaction: :obj:`bool`</span>
<span class="sd">    :param assistant: If game assistant should be enabled.</span>
<span class="sd">    :type assistant: :obj:`bool`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">all_locations</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Location</span><span class="p">],</span>
            <span class="n">all_characters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Character</span><span class="p">],</span>
            <span class="n">starting_location</span><span class="p">:</span> <span class="n">Location</span><span class="p">,</span>
            <span class="n">first_interaction</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">assistant</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_all_locations</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Location</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_locations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_all_characters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Character</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_characters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_location</span><span class="p">:</span> <span class="n">Location</span> <span class="o">=</span> <span class="n">starting_location</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fails</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_first_interaction</span> <span class="o">=</span> <span class="n">first_interaction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_assistant</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">assistant</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">location</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Location</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Player&#39;s current location. Displays ``&quot;???&quot;`` if location is not known by the player.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_location</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_locations</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Location</span><span class="p">(</span><span class="s1">&#39;???&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_location</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">characters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Character</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;All characters in player&#39;s current location.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_characters</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_location</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="World._prefix">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._prefix">[docs]</a>
    <span class="k">def</span> <span class="nf">_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays before game console&#39;s input field with current location&#39;s name.&quot;&quot;&quot;</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s1">&#39;[ &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s1">&#39; ] &#39;</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="World._prefix_help">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._prefix_help">[docs]</a>
    <span class="k">def</span> <span class="nf">_prefix_help</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays before game console&#39;s input field inside help menu/mode.&quot;&quot;&quot;</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span> <span class="s1">&#39;Help&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">Style</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span> <span class="p">),</span> <span class="s1">&#39;]&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="World.find_location">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World.find_location">[docs]</a>
    <span class="k">def</span> <span class="nf">find_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Location</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tries to find a location in all locations by its&#39; name.</span>

<span class="sd">        :param name: The location&#39;s name to be found.</span>
<span class="sd">        :type name: :obj:`str`</span>
<span class="sd">        :return: The location if it&#39;s found, `None` otherwise.</span>
<span class="sd">        :rtype: :class:`FTE.locations.Location` or `None`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">location</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">and</span> <span class="n">l</span><span class="o">.</span><span class="n">known</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_all_locations</span>
            <span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">location</span></div>


<div class="viewcode-block" id="World.find_character">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World.find_character">[docs]</a>
    <span class="k">def</span> <span class="nf">find_character</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Character</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tries to find a character in all characters by it&#39;s name.</span>

<span class="sd">        :param name: The character&#39;s name to be found.</span>
<span class="sd">        :type name: :obj:`str`</span>
<span class="sd">        :return: The character if it&#39;s found, `None` otherwise.</span>
<span class="sd">        :rtype: :class:`FTE.characters.Character` or `None`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_characters</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="World._character_in">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._character_in">[docs]</a>
    <span class="k">def</span> <span class="nf">_character_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Character</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Character</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if character is in a location.</span>

<span class="sd">        :param name: Character&#39;s name to be checked.</span>
<span class="sd">        :type name: :obj:`str`</span>
<span class="sd">        :param scope: List of characters to search in.</span>
<span class="sd">        :type scope: :obj:`tuple` of :class:`FTE.characters.Character` or :obj:`list` of :class:`FTE.characters.Character`</span>
<span class="sd">        :return: `True` if character is in a location, `False` otherwise.</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">known</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">scope</span><span class="p">)</span></div>


<div class="viewcode-block" id="World.character_in_global">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World.character_in_global">[docs]</a>
    <span class="k">def</span> <span class="nf">character_in_global</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if character exists.</span>

<span class="sd">        :param name: Target character&#39;s name.</span>
<span class="sd">        :type name: :obj:`str`</span>
<span class="sd">        :return: `True` if character exists, `False` otherwise.</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_character_in</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_characters</span><span class="p">)</span></div>


<div class="viewcode-block" id="World.character_in_location">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World.character_in_location">[docs]</a>
    <span class="k">def</span> <span class="nf">character_in_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if character is in the same location.</span>

<span class="sd">        :param name: Target character&#39;s name.</span>
<span class="sd">        :type name: :obj:`str`</span>
<span class="sd">        :return: `True` if character is in the same location as the player, `False` otherwise.</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_character_in</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">characters</span><span class="p">)</span></div>


<div class="viewcode-block" id="World.character_enters">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World.character_enters">[docs]</a>
    <span class="k">def</span> <span class="nf">character_enters</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">character</span><span class="p">:</span> <span class="n">Character</span><span class="p">,</span>
            <span class="o">*</span><span class="p">,</span>
            <span class="n">silently</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Moves a character to player&#39;s current location.</span>

<span class="sd">        :param character: The character to move.</span>
<span class="sd">        :type character: :class:`FTE.characters.Character`</span>
<span class="sd">        :param silently: If player should know about the character&#39;s entrance.</span>
<span class="sd">        :type silently: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_in_location</span><span class="p">(</span><span class="n">character</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="n">character</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_location</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">silently</span><span class="p">:</span>
                <span class="n">character</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s1">&#39;Walks in.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="World.character_leaves">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World.character_leaves">[docs]</a>
    <span class="k">def</span> <span class="nf">character_leaves</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">character</span><span class="p">:</span> <span class="n">Character</span><span class="p">,</span>
            <span class="n">goes_to</span><span class="p">:</span> <span class="n">Location</span><span class="p">,</span>
            <span class="o">*</span><span class="p">,</span>
            <span class="n">silently</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Moves a character to another location.</span>

<span class="sd">        :param character: The character to move.</span>
<span class="sd">        :type character: :class:`FTE.characters.Character`</span>
<span class="sd">        :param goes_to: Where the character will move.</span>
<span class="sd">        :type goes_to: :class:`FTE.locations.Location`</span>
<span class="sd">        :param silently: If player should know about the character&#39;s leave.</span>
<span class="sd">        :type silently: :obj:`bool` or `None`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_in_location</span><span class="p">(</span><span class="n">character</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="n">character</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">goes_to</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">silently</span><span class="p">:</span>
                <span class="n">character</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s1">&#39;Walks out.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="World._show_location_characters">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._show_location_characters">[docs]</a>
    <span class="k">def</span> <span class="nf">_show_location_characters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays characters count and list in player&#39;s location.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">characters</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;There are no characters in this location.&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">l</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;There is 1 character in this location: &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;There are </span><span class="si">{</span><span class="n">l</span><span class="si">}</span><span class="s1"> characters in this location: &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">location_characters</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">Text</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">characters</span><span class="p">:</span>
            <span class="n">location_characters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
            <span class="n">location_characters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        <span class="n">location_characters</span> <span class="o">=</span> <span class="n">location_characters</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="o">*</span><span class="n">location_characters</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="World._show_other_locations">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._show_other_locations">[docs]</a>
    <span class="k">def</span> <span class="nf">_show_other_locations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays count and list of available locations.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
        <span class="n">other_locations</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="n">l</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_locations</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other_locations</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;There are no other locations you can go to.&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">l</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;There is 1 other location you can go to: &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;There are </span><span class="si">{</span><span class="n">l</span><span class="si">}</span><span class="s1"> other locations you can go to: &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">locations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">Text</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">other_locations</span><span class="p">:</span>
            <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
            <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        <span class="n">locations</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="o">*</span><span class="n">locations</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="World._do_first_interaction">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._do_first_interaction">[docs]</a>
    <span class="k">def</span> <span class="nf">_do_first_interaction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays basic information how to play and asks if player needs additional help.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix_help</span><span class="p">()</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span>
            <span class="s1">&#39;This is your first interaction with the World.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Would you like to enable assitant?&#39;</span>
        <span class="p">)</span>
        <span class="n">expect</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix_help</span><span class="p">()</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">console</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">expect</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix_help</span><span class="p">()</span>
            <span class="n">query</span> <span class="o">=</span> <span class="n">console</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;&quot;yes&quot; or &quot;no&quot;? &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_first_interaction</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">&#39;no&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix_help</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;OK! I won</span><span class="se">\&#39;</span><span class="s1">t ask you again. Have fun!&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span>
                <span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s1">&#39;Fix The Engines&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">Style</span><span class="p">(</span><span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)),</span>
                <span class="s1">&#39; is text-based, paragraph game. There is no mouse control,&#39;</span><span class="p">,</span>
                <span class="s1">&#39; you operate only with commands.&#39;</span>
            <span class="p">),</span>
            <span class="s1">&#39;You can show them by typing &quot;help&quot; during interaction&#39;</span> <span class="o">+</span>
            <span class="s1">&#39; with the World.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;All commands are single words. For example &quot;help&quot; or&#39;</span> <span class="o">+</span>
            <span class="s1">&#39; &quot;go&quot; insted of &quot;go to&quot;.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Have fun! :smile:&#39;</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix_help</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">DEBUG</span><span class="p">:</span>
                <span class="n">sleep</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_assistant</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="World._command_exit">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._command_exit">[docs]</a>
    <span class="k">def</span> <span class="nf">_command_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Exits the game.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Goodbye!&#39;</span><span class="p">)</span>
        <span class="n">exit</span><span class="p">()</span></div>


<div class="viewcode-block" id="World._command_help">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._command_help">[docs]</a>
    <span class="k">def</span> <span class="nf">_command_help</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">menu</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays help menu.&quot;&quot;&quot;</span>
        <span class="n">show_commands</span><span class="p">,</span> <span class="n">show_arguments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">menu</span> <span class="o">==</span> <span class="s1">&#39;commands&#39;</span><span class="p">:</span>
            <span class="n">show_commands</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">menu</span> <span class="o">==</span> <span class="s1">&#39;arguments&#39;</span><span class="p">:</span>
            <span class="n">show_arguments</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">show_commands</span><span class="p">,</span> <span class="n">show_arguments</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">show_commands</span><span class="p">:</span>
            <span class="n">commands_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Available commands&#39;</span><span class="p">,</span>
                <span class="n">show_lines</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="n">commands_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;Command&#39;</span><span class="p">)</span>
            <span class="n">commands_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">)</span>
            <span class="n">commands_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;Usage&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">COMMANDS</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">commands_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cmd</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">cmd</span><span class="o">.</span><span class="n">usage</span><span class="p">)</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">commands_table</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">show_arguments</span><span class="p">:</span>
            <span class="n">arguments_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Arguments description&#39;</span><span class="p">)</span>
            <span class="n">arguments_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;Representation&#39;</span><span class="p">)</span>
            <span class="n">arguments_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="p">(</span>
                <span class="p">(</span><span class="s1">&#39;&lt; ... &gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;Required argument.&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s1">&#39;( ... )&#39;</span><span class="p">,</span> <span class="s1">&#39;Optional argument.&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s1">&#39;( a | b )&#39;</span><span class="p">,</span> <span class="s1">&#39;Optional argument, but only &quot;a&quot; or &quot;b&quot;.&#39;</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">arguments_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="o">*</span><span class="n">line</span><span class="p">)</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">arguments_table</span><span class="p">)</span></div>


<div class="viewcode-block" id="World._command_talk">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._command_talk">[docs]</a>
    <span class="k">def</span> <span class="nf">_command_talk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">character_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Character</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Tries to talk to a :class:`FTE.characters.Character`.</span>
<span class="sd">        The character must:</span>

<span class="sd">        - exist,</span>
<span class="sd">        - be in the player&#39;s location,</span>
<span class="sd">        - be pokable.</span>

<span class="sd">        If no name is specified, nothing happens.</span>

<span class="sd">        :param character_name: The character&#39;s name to which player is trying to talk.</span>
<span class="sd">        :type character_name: :obj:`str`</span>
<span class="sd">        :return: The character player is trying to talk. `None` if the character doesn&#39;t meet above requirements.</span>
<span class="sd">        :rtype: :class:`FTE.characters.Character` or `None`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">character_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;You speak to everyone, but no one hears you.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_in_global</span><span class="p">(</span><span class="n">character_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;You don</span><span class="se">\&#39;</span><span class="s1">t know this character.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_in_location</span><span class="p">(</span><span class="n">character_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;This chracter is not here.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">char</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_character</span><span class="p">(</span><span class="n">character_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span><span class="o">.</span><span class="n">pokable</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="n">char</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s1">&#39; does not want to talk with you.&#39;</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">char</span><span class="o">.</span><span class="n">monologue</span><span class="p">(</span><span class="n">char</span><span class="o">.</span><span class="n">poke</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">char</span></div>


<div class="viewcode-block" id="World._command_go">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._command_go">[docs]</a>
    <span class="k">def</span> <span class="nf">_command_go</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">location_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Location</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tries to go to a location.</span>

<span class="sd">        :param location_name: The location&#39;s name to which player is trying to go to. If no name is specified, nothing happens.</span>
<span class="sd">        :type location_name: :obj:`str`</span>
<span class="sd">        :return: The location player is trying to go. `None` if the location doesn&#39;t exist or player is already in wanted location.</span>
<span class="sd">        :rtype: :class:`FTE.locations.Location` or `None`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">location_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;After running in circle for a while you find it worthless.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">location</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_location</span><span class="p">(</span><span class="n">location_name</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;You don</span><span class="se">\&#39;</span><span class="s1">t know this location.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_location</span> <span class="o">==</span> <span class="n">location</span><span class="p">:</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;You</span><span class="se">\&#39;</span><span class="s1">re currently here.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_location</span> <span class="o">=</span> <span class="n">location</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s1">&#39;You</span><span class="se">\&#39;</span><span class="s1">re now in &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show_location_characters</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">location</span></div>


<div class="viewcode-block" id="World._command_info">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World._command_info">[docs]</a>
    <span class="k">def</span> <span class="nf">_command_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays informaiom about a character or location.</span>

<span class="sd">        :param name: Character or location name the player wants information baout, defaults to current location.</span>
<span class="sd">        :type name: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_location</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">loc</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_location</span><span class="p">(</span><span class="n">name</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">:=</span> <span class="n">loc</span><span class="o">.</span><span class="n">info</span><span class="p">):</span>
                <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;You don</span><span class="se">\&#39;</span><span class="s1">t know anything about this location.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">loc</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_location</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_show_location_characters</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_show_other_locations</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">char</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_character</span><span class="p">(</span><span class="n">name</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span>
                <span class="n">char</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                <span class="s1">&#39; has &#39;</span><span class="p">,</span>
                <span class="n">char</span><span class="o">.</span><span class="n">standing</span><span class="o">.</span><span class="n">color_text</span><span class="p">,</span>
                <span class="s1">&#39; standing towards you.&#39;</span>
            <span class="p">))</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">:=</span> <span class="n">char</span><span class="o">.</span><span class="n">info</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
                <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="n">char</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;I don</span><span class="se">\&#39;</span><span class="s1">t know what do you mean.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="World.assistant">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World.assistant">[docs]</a>
    <span class="k">def</span> <span class="nf">assistant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Text</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Displays additional help if the player requested it during the first :meth:`FTE.world.World.interaction`.</span>

<span class="sd">        :param text: The text to display.</span>
<span class="sd">        :type text: :obj:`str` or :class:`rich.text.Text`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant</span><span class="p">:</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>


<div class="viewcode-block" id="World.interaction">
<a class="viewcode-back" href="../../_FTE_autodoc/FTE.html#FTE.world.World.interaction">[docs]</a>
    <span class="k">def</span> <span class="nf">interaction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Character</span> <span class="o">|</span> <span class="n">Location</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The main game logic. Controls interactions between the player and world.</span>
<span class="sd">        For example talking to characters and going to locations.</span>
<span class="sd">        At first time game asks player if they want to enable assistant (:meth:`FTE.world.World.assistant`).</span>

<span class="sd">        :return: The object with wich player got with interaction. `None` if doesn&#39;t apply.</span>
<span class="sd">        :rtype: :class:`FTE.characters.Character`, :class:`FTE.locations.Location`, or `None`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_interaction</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_do_first_interaction</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">query</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
                <span class="n">query</span> <span class="o">=</span> <span class="n">console</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
                <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Text</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span>
                    <span class="s1">&#39; Retry...&#39;</span><span class="p">,</span>
                    <span class="n">style</span><span class="o">=</span><span class="n">Style</span><span class="p">(</span>
                        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
                        <span class="n">italic</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">)))</span>
                <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">query</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">command</span><span class="p">,</span> <span class="n">argument</span> <span class="o">=</span> <span class="n">query</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">[</span><span class="n">command</span><span class="p">,</span> <span class="n">argument</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">COMMANDS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">command</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fails</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prefix</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fails</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Psst, you can use `help`.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;I</span><span class="se">\&#39;</span><span class="s1">m not sure what do you mean.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fails</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">match</span> <span class="n">command</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="k">case</span> <span class="s1">&#39;exit&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_command_exit</span><span class="p">()</span>
            <span class="k">case</span> <span class="s1">&#39;help&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_command_help</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">case</span> <span class="s1">&#39;talk&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command_talk</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
            <span class="k">case</span> <span class="s1">&#39;go&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command_go</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
            <span class="k">case</span> <span class="s1">&#39;info&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_command_info</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span></div>
</div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Fix The Engines 0.4.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">FTE.world</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, Jakub Suchenek, Michał Gołębiewski.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.0.2.
    </div>
  </body>
</html>